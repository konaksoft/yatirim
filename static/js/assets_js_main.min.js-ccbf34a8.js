function toObject(value){if(null==value)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(value)}function objectAssign(target,source){for(var from,to=toObject(target),hasOwnProperty=Object.prototype.hasOwnProperty,getOwnPropertySymbols=Object.getOwnPropertySymbols,propIsEnumerable=Object.prototype.propertyIsEnumerable,s=1;s<arguments.length;s++){for(var key in from=Object(arguments[s]))hasOwnProperty.call(from,key)&&(to[key]=from[key]);if(getOwnPropertySymbols)for(var symbols=getOwnPropertySymbols(from),i=0;i<symbols.length;i++)propIsEnumerable.call(from,symbols[i])&&(to[symbols[i]]=from[symbols[i]])}return to}var objInstances={};const singleFormComponent=Vue.component("single-form",function(resolve,reject){resolve({data:function(){return{progress:!1,initialized:!1,cartSubmitted:!1,subpalettes:{},once:!1,palettes:[],model:{},type:""}},methods:{fetch:function(strSource){if(this.formData&&!this.once&&(this.model=this.setModel(this.formData),this.setPalette(this.formData),this.initialized=!0,this.once=!0,this.palettes.length))return null;var objParent=this.getParentSharedInstance(this.$parent);this.$http.get(this.absoluteUrl+"/survey-manager/get"+strSource+"/"+this.identifier,{params:{id:this.id,type:this.type,hash:window.location.hash?window.location.hash.substr(1):"",language:this.language||"",attributes:this.attributes,initialized:this.initialized,subpalettes:this.subpalettes}}).then(function(objResponse){objResponse.body&&objResponse.ok&&(this.model=this.setModel(objResponse.body),this.setPalette(objResponse.body),this.initialized=!0,objParent.clearAlert()),objResponse.ok||objParent.setErrorAlert("",this)}.bind(this))},setModel:function(palettes){let objModel={};var varStorage,strFieldname;this.useStorage&&(varStorage=localStorage.getItem("model-"+this.id))&&(this.model=JSON.parse(varStorage),this.triggerOnInput()),this.model&&this.model.hasOwnProperty("id")&&(objModel.id=this.model.id);for(let i=0;i<palettes.length;i++)for(var intKey in palettes[i].fields)!palettes[i].fields.hasOwnProperty(intKey)||(strFieldname=palettes[i].fields[intKey].name)&&("type"===strFieldname&&(this.type=palettes[i].fields[intKey].value),this.model?objModel[strFieldname]=this.model[strFieldname]||palettes[i].fields[intKey].value:objModel[strFieldname]=palettes[i].fields[intKey].value);if(this.id&&void 0!==objInstances[this.id])for(var strName in objModel)objModel.hasOwnProperty(strName)&&(objModel[strName]=objInstances[this.id].model[strName]);if(window.VueData._modal&&objModel.hasOwnProperty(window.VueData._modal.field)&&window.VueData._modal.created&&(objModel[window.VueData._modal.field]=window.VueData._modal.created),this.model)for(let strName in this.model)!this.model.hasOwnProperty(strName)||objModel.hasOwnProperty(strName)||(objModel[strName]=this.model[strName]);return objModel||{}},getSource:function(){switch(this.source){case"dc":return"DcForm";case"form":return"Form"}},fetchBySource:function(){this.fetch(this.getSource())},submitOnChange:function(strValue,strName,blnIsSelector){"type"===strName&&(this.type=strValue),!0===blnIsSelector&&(this.subpalettes[strName]=strName+"::"+strValue),this.attributes[strName]=strValue;this.getParentSharedInstance(this.$parent).setLoadingAlert("",this),this.fetchBySource();for(var objShare={},j=0;j<this.$children.length;j++)this.$children[j].$vnode.tag&&void 0!==this.$children[j].onChange&&(objShare[strName]=strValue,this.$children[j].onChange(objShare))},onChange:function(share,component){void 0!==component&&void 0!==component.$vnode&&null!==component.$vnode&&"modal-view"===component.$vnode.componentOptions.tag&&this.fetchBySource()},onSubmit:function(){if(this.progress)return null;this.progress=!0;let objParent=this.getParentSharedInstance(this.$parent);objParent.setLoadingAlert("",this),this.getSubmitPromise().then(function(objResponse){if(objResponse.body)if(this.setPalette(objResponse.body.form),objResponse.body.success){if(this.$parent.forms)this.setActiveStateInMultipleForm();else{if(this.addCart)return this.add2Cart(this.cart.product,this.cart.units,this.cart.cid,this.cart.options),null;let strRedirect=this.successRedirect;if(this.submitCallback&&"function"==typeof this.submitCallback&&(strRedirect=this.submitCallback(this,objResponse.body)),strRedirect=void 0!==objResponse.body.redirect&&objResponse.body.redirect?objResponse.body.redirect:strRedirect)return this.progress=!0,localStorage.setItem("model-"+this.id,""),window.location.href=strRedirect,null}this.progress=!1,objParent.onChange(this),objParent.clearAlert()}else this.progress=!1,objParent.setErrorAlert(objResponse.body.message,this)}.bind(this))},getSubmitPromise:function(){return this.$http.post(this.absoluteUrl+"/survey-manager/"+(this.validateOnly?"validate":"save")+"/"+this.source+"/"+this.identifier+this.getParameters(),this.model,{emulateJSON:!0,"Content-Type":"application/x-www-form-urlencoded"})},add2Cart:function(productId,units,cid,options){let attributes={};this.cartSubmitted=!0,attributes[this.id]=this.model,(this.model.quantity||this.model.units)&&(units=this.model.quantity),this.$http.post(this.absoluteUrl+"/shop-manager/addCart",{cid:cid,units:units,productId:productId,attributes:attributes,language:this.language},{emulateJSON:!0}).then(function(objResponse){objResponse.body.error?this.getParentSharedInstance(this.$parent).setErrorAlert(objResponse.body.message,this):(this.model={},localStorage.setItem("model-"+this.id,""),this.getParentSharedInstance(this.$parent).cartActive=!0,this.getParentSharedInstance(this.$parent).onChange(this),objResponse.body.message&&this.getParentSharedInstance(this.$parent).setLoadingAlert(objResponse.body.message,this),this.getParentSharedInstance(this.$parent).clearAlert(),this.cartSubmitted=!1)}.bind(this))},getParameters:function(){var arrParameters=[];if(void 0!==this.attributes&&this.attributes)for(var strName in this.attributes)this.attributes.hasOwnProperty(strName)&&arrParameters.push("attributes["+strName+"]="+encodeURIComponent(this.attributes[strName]));if(void 0!==this.subpalettes&&this.subpalettes)for(var strSubPalette in this.subpalettes)this.subpalettes.hasOwnProperty(strSubPalette)&&arrParameters.push("subpalettes[]="+encodeURIComponent(this.subpalettes[strSubPalette]));return arrParameters.push("id="+encodeURIComponent(this.id)),arrParameters.push("type="+encodeURIComponent(this.type)),arrParameters.push("language="+encodeURIComponent(this.language||"")),arrParameters.push("initialized="+encodeURIComponent(this.initialized)),"?"+arrParameters.join("&")},setPalette:function(palette){this.palettes=palette},setInput:function(field){let objParent=this.getParentSharedInstance(this.$parent);for(var strFieldname in this.model)this.model.hasOwnProperty(strFieldname)&&(objParent.shared[strFieldname]=this.model[strFieldname]);this.triggerOnInput(),field.isReactive&&objParent.onChange(this)},triggerOnInput:function(){var objParent=this.getParentSharedInstance(this.$parent);objParent.onInput&&"function"==typeof objParent.onInput&&objParent.onInput(this.model,this)},setActiveStateInMultipleForm:function(){for(var i=0;i<this.$parent.forms.length;i++)this.identifier===this.$parent.forms[i].identifier&&this.source===this.$parent.forms[i].source&&(this.$parent.forms[i].valid=!0,this.$parent.forms[i].valid&&(this.$parent.forms[i+1]?this.$parent.setActive(this.$parent.forms[i+1],i+1):this.$parent.setComplete()))},getParentSharedInstance:function(parent){return void 0!==parent.$parent?this.getParentSharedInstance(parent.$parent):parent},saveInstance:function(){objInstances[this.id]={initialized:this.initialized,language:this.language,palettes:this.palettes,model:this.model,type:this.type,_source:this.source,_formId:this.identifier}},getInstance:function(id){objInstances.hasOwnProperty(id)&&objectAssign(this.$data,objInstances[id])}},watch:{id:function(newId){this.getInstance(newId),this.fetchBySource()},model:{handler:function(){try{localStorage.setItem("model-"+this.id,JSON.stringify(this.model))}catch(e){e.name}},deep:!0}},mounted:function(){this.getInstance(this.id),this.fetchBySource()},props:{id:{type:String,default:null},identifier:{type:String,default:null,required:!0},source:{type:String,default:null,required:!0},validateOnly:{type:Boolean,default:!1},disableSubmit:{type:Boolean,default:!1},model:{default:{},type:Object,required:!1},submitLabel:{type:String,default:"Senden",required:!1},successRedirect:{type:String,default:"",required:!1},disableLoader:{type:Boolean,default:!1,required:!1},attributes:{default:{},type:Object,required:!1},submitCallback:{default:null,type:Function,required:!1},useStorage:{type:Boolean,default:!1,required:!1},language:{type:String,default:null,required:!1},addCart:{type:Boolean,default:!1,required:!1},cart:{default:{},type:Object,required:!1},formData:{type:Object,default:null,required:!1},absoluteUrl:{default:"",type:String,required:!1},pageId:{default:"",type:String,required:!1}},template:'<div class="form-component"><div class="form-component-container"><form v-if="palettes.length" v-on:submit.prevent="onSubmit"><template v-for="palette in palettes"><div class="palette" v-bind:class="palette.name"><p v-if="palette.label" class=palette-name>{{ palette.label }}</p><div class="palette-container"><template v-for="field in palette.fields" v-if="field.component"><component :is="field.component" :eval="field" :name="field.name" v-model="model[field.name]" v-on:input="setInput(field)"></component></template></div></div></template><slot></slot><div v-if="!disableSubmit" class="form-buttons-container"><div class="form-submit"><button type="submit" class="submit" v-html="submitLabel"></button></div></div></form><loading v-if="!palettes.length && !disableLoader"></loading></div></div>'})}),tabSliderComponent=(Vue.component("text-field",{data:function(){return{timeout:null,css:{}}},watch:{value:function(){if(this.eval.validate=!0,this.eval.multiple&&this.value.length)for(let i=0;i<this.eval.size;i++)void 0===this.value[i]&&(this.value[i]="");this.eval.isReactive?(null!==this.timeout&&clearTimeout(this.timeout),this.timeout=setTimeout(function(){this.$emit("input",this.value)}.bind(this),800)):this.$emit("input",this.value)}},methods:{getType:function(){return this.eval.rgxp&&"natural"===this.eval.rgxp?"number":"text"},setCssClass:function(){return this.eval.tl_class&&(this.css[this.eval.tl_class]=!0),this.eval.class&&(this.css[this.eval.class]=!0),this.css.mandatory=!!this.eval.mandatory,this.css.multiple=!!this.eval.multiple,this.css[this.name]=!0,this.css.error=!1===this.eval.validate,this.css},openModalView:function(e){if("undefined"==typeof Backend)return null;Backend.openModalSelector({id:"tl_listing",title:this.eval.label,url:e.currentTarget.href+"&value="+this.value,callback:function(picker,value){this.value=value.join(",")}.bind(this)})},emit:function(){this.$emit("input",this.value,!0)},invalid:function(){this.eval.validate=!1,this.eval.messages=[],this.$forceUpdate()},submit:function(){if(this.eval.mandatory&&!FormHelperValidator.validateMandatory(this.value))return this.invalid(),!1;if(!FormHelperValidator.validateMinLength(this.value,this.eval.minlength))return this.invalid(),!1;if(!FormHelperValidator.validateMaxLength(this.value,this.eval.maxlength))return this.invalid(),!1;if(this.eval.loadingView&&this.eval.loadingViewUrl){if(this.$parent&&"function"==typeof this.$parent.setLoadingView&&this.$parent.setLoadingView(this,{ok:!1}),"/"===this.eval.loadingViewUrl)return this.$parent&&"function"==typeof this.$parent.disableLoadingView&&this.$parent.getLoadingViewRequest(this,{ok:!0,body:{view:this.eval.view}}),null;this.$http.get(this.eval.loadingViewUrl,{params:{name:this.name,value:this.value,id:this.eval.id||""}}).then(function(objResponse){objResponse.ok&&this.$parent&&"function"==typeof this.$parent.disableLoadingView&&this.$parent.getLoadingViewRequest(this,objResponse)}.bind(this),function(objResponse){this.$parent&&"function"==typeof this.$parent.disableLoadingView&&this.$parent.getLoadingViewRequest(this,objResponse)}.bind(this))}else this.emit()}},props:{eval:{default:{},type:Object,required:!0},name:{default:"",type:Object,required:!0},value:{default:null,type:String|Array},idPrefix:{default:"",type:String,required:!1}},created:function(){this.eval.submit=!1},template:'<div class="field-component text" v-bind:class="setCssClass()"><div class="field-component-container dcapicker"><label class="label" :for="idPrefix + \'id_\' + name" v-html="eval.label"></label><input class="tl_text" class="tl_text" :type="getType()" v-model="value" v-on:keyup.enter.prevent="submit" :id="idPrefix + \'id_\' + name" :placeholder="eval.placeholder" v-if="!eval.multiple"><a v-if="eval.dcaPicker" @click.prevent="openModalView($event)" href="/contao/picker?context=link"><img src="system/themes/flexible/icons/pickpage.svg" width="16" height="16" alt=""></a><div v-if="eval.multiple" class="field-multiple"><input v-for="n in eval.size" class="tl_text" type="text" v-model="value[n-1]" :id="idPrefix + \'id_\' + name + (n === 1 ? \'\' : n )" :placeholder="eval.placeholder"></div><template v-if="!eval.validate"><p class="error" v-for="message in eval.messages">{{ message }}</p></template><button v-if="eval.showButton" v-html="eval.buttonText" @click.prevent="submit" class="button submit"></button><div v-if="eval.description" v-html="eval.description" class="info"></div></div></div>'}),Vue.component("hidden-field",{data:function(){return{}},props:{eval:{default:{},type:Object,required:!0},name:{default:"",type:Object,required:!0},value:{default:null,type:String|Array}},template:'<div class="field-component hidden"><div class="field-component-container"><input type="hidden" v-model="value" :name="name"></div></div>'}),Vue.component("explain-field",{data:function(){return{}},methods:{setCssClass:function(){let objCssClass={};return this.eval.tl_class&&(objCssClass[this.eval.tl_class]=!0),this.eval.mandatory&&(objCssClass.mandatory=!0),this.eval.class&&(objCssClass[this.eval.class]=!0),objCssClass[this.name]=!0,objCssClass}},props:{eval:{default:{},type:Object,required:!0},name:{default:"",type:Object,required:!0},value:{type:String,default:null,required:!1},idPrefix:{default:"",type:String,required:!1}},template:'<div class="field-component explain" v-bind:class="setCssClass()"><div class="field-component-container" v-html="eval.text"></div></div>'}),Vue.component("email-field",{data:function(){return{css:{}}},methods:{setCssClass:function(){return this.eval.tl_class&&(this.css[this.eval.tl_class]=!0),this.eval.mandatory&&(this.css.mandatory=!0),this.css.error=!1===this.eval.validate,this.css[this.name]=!0,this.css}},watch:{value:function(){this.$emit("input",this.value),this.eval.validate=!0}},props:{eval:{default:{},type:Object,required:!0},name:{default:"",type:Object,required:!0},value:{default:null,type:String|Array},idPrefix:{default:"",type:String,required:!1}},template:'<div class="field-component text" v-bind:class="setCssClass()"><div class="field-component-container"><label v-if="eval.label" class="label" :for="idPrefix + \'id_\' + name" v-html="eval.label"></label><input type="email" v-model="value" :id="idPrefix + \'id_\' + name" :placeholder="eval.placeholder" class="tl_text"><template v-if="!eval.validate"><p class="error" v-for="message in eval.messages">{{ message }}</p></template><div v-if="eval.description" v-html="eval.description" class="info"></div></div></div>'}),Vue.component("checkbox-field",{data:function(){return{selectAll:!1,css:{}}},methods:{checked:function(strValue){return Array.isArray(this.value)?-1!==this.value.indexOf(strValue):strValue==this.value},setSelectAll:function(){if(this.selectAll=!this.selectAll,this.selectAll&&Array.isArray(this.eval.options)){this.value=[];for(let i=0;i<this.eval.options.length;i++)this.value.push(this.eval.options[i].value)}this.selectAll||(this.value=[])},setCssClass:function(){return this.eval.tl_class&&(this.css[this.eval.tl_class]=!0),this.css.error=this.eval.messages&&this.eval.messages.length,this.eval.mandatory&&(this.css.mandatory=!0),this.css.single=!this.eval.multiple,this.css[this.name]=!0,this.css},submit:function(value){value===this.value&&this.$emit("input",this.value,!0)},getSelectAllId:function(){return this.idPrefix+"_"+this.name+"_selectAll"},reduceOption:function(option){return"object"==typeof option?option.value:option},parseJsonValue:function(value){return""===value||null==value?{}:"string"==typeof value&&/^[\],:{}\s]*$/.test(value.replace(/\\["\\\/bfnrtu]/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,""))?JSON.parse(value):value}},created:function(){if(null===this.value&&this.eval.multiple&&(this.value=[]),"1"===this.value&&this.eval.isSelector&&this.$parent.submitOnChange(this.value,this.name,this.eval.isSelector),"object"==typeof this.value&&null!==this.value&&void 0!==this.value.length){let reduceValues=[];for(let i=0;i<this.value.length;i++)reduceValues[i]=this.reduceOption(this.value[i]);this.value=reduceValues}},watch:{value:function(){this.$emit("input",this.value),this.eval.submitOnChange&&this.$parent.submitOnChange(this.value,this.name,this.eval.isSelector),this.eval.messages=[]}},mounted:function(){this.eval.selectAllLabel&&(this.selectAllLabel=this.eval.selectAllLabel);for(let i=0;i<this.eval.options.length;i++)this.eval.options[i].label=this.parseJsonValue(this.eval.options[i].label)},props:{eval:{default:{},type:Object,required:!0},name:{type:String,required:!0},value:{default:null,type:String|Array},idPrefix:{default:"",type:String,required:!1},noLabel:{type:Boolean,default:!1,required:!1},selectAllLabel:{type:String,required:!1,default:"Alle auswählen"}},template:'<div class="field-component checkbox" v-bind:class="setCssClass()"><div class="field-component-container"><p v-if="eval.multiple && !noLabel" class="label" v-html="eval.label"></p><span v-if="eval.multiple && !eval.disableAllSelection" class="all checkbox-container" v-bind:class="{ \'checked\': selectAll }"><input type="checkbox" v-model="selectAll" :id="getSelectAllId()" @click="setSelectAll()"><label :for="getSelectAllId()" v-html="selectAllLabel"></label></span><span v-for="(option,index) in eval.options" class="checkbox-container" v-bind:class="{\'checked\': checked(option.value), \'w50\': option.label.cssClass===\'w50\', \'w50last\': option.label.cssClass===\'w50last\', \'w30\': option.label.cssClass===\'w30\'}"><input v-if="eval.multiple" type="checkbox" v-model="value" :value="option.value" :id="idPrefix + \'id_\' + name + \'_\' + index"><input v-if="!eval.multiple" type="checkbox" v-model="value" true-value="1" false-value="" :id="idPrefix + \'id_\' + name + \'_\' + index"><slot name="label" v-bind:label="option.label" v-bind:id="idPrefix + \'id_\' + name + \'_\' + index"><label :for="idPrefix + \'id_\' + name + \'_\' + index" v-html="option.label"></label></slot></span><template v-if="!eval.validate"><p class="error" v-for="message in eval.messages" v-html="message"></p></template><div v-if="eval.description" v-html="eval.description" class="info"></div></div></div>'}),Vue.component("radio-field",{data:function(){return{css:{}}},methods:{checked:function(strValue){return Array.isArray(this.value)?-1!==this.value.indexOf(strValue):this.value==strValue},setDefault:function(){if(this.eval.options)for(let i=0;i<this.eval.options.length;i++)this.eval.options[i].default&&(this.value=this.eval.options[i].value)},setCssClass:function(){return this.eval.tl_class&&(this.css[this.eval.tl_class]=!0),this.eval.mandatory&&(this.css.mandatory=!0),this.css.error=!1===this.eval.validate,this.css[this.name]=!0,this.css},submit:function(value){setTimeout(function(){this.$emit("input",value,!0)}.bind(this),100)},emit:function(){this.$emit("input",this.value,!0)}},watch:{value:function(){this.$emit("input",this.value),this.eval.submitOnChange&&this.$parent.submitOnChange(this.value,this.name),this.eval.validate=!0}},props:{eval:{default:{},type:Object,required:!0},name:{default:"",type:Object,required:!0},value:{type:String,default:null},idPrefix:{default:"",type:String,required:!1},noLabel:{type:Boolean,default:!1,required:!1}},mounted:function(){this.setDefault();for(let i=0;i<this.eval.options;i++)this.eval.options[i].label=this.parseJsonValue(this.eval.options[i].label)},template:'<div class="field-component radio" v-bind:class="setCssClass()"><div class="field-component-container"><p v-if="eval.label && !noLabel" class="label" v-html="eval.label"></p><span v-for="(option, index) in eval.options" class="radio-container" v-bind:class="{ \'checked\': checked(option.value) }"><input type="radio" v-model="value" :value="option.value" :id="idPrefix + \'id_\' + name + \'_\' + index" @click="submit(option.value)"><slot name="label" v-bind:label="option.label" v-bind:id="idPrefix + \'id_\' + name + \'_\' + index"><label :for="idPrefix + \'id_\' + name + \'_\' + index" v-html="option.label"></label></slot></span><template v-if="!eval.validate"><p class="error" v-for="message in eval.messages">{{ message }}</p></template><div v-if="eval.description" v-html="eval.description" class="info"></div></div></div>'}),Vue.component("tab-slider",{data:function(){return{step:0,slide:null,lastStep:0,submit:!1,created:!1,loading:{show:!1,view:null},progressbar:{container:{height:"8px",width:"100%"},line:{width:"0",height:"100%"}},response:{}}},methods:{afterEnter:function(slide){if(!slide)return null;slide.classList.remove("forward"),slide.classList.remove("backward")},beforeEnter:function(slide){if(!slide)return null;(this.step>this.lastStep||!this.step&&!this.lastStep)&&slide.classList.add("forward"),(this.step<this.lastStep||!this.step&&this.lastStep)&&slide.classList.add("backward")},next:function(submit){this.submit=!!submit,this.lastStep=this.step,this.disableLoadingView(),this.isValid(this.step)&&(this.step=this.hasSlide(this.step+1)?this.step+1:this.step,this.lastStep===this.step&&this.$parent&&"function"==typeof this.$parent.submitSurvey&&this.$parent.submitSurvey(this)),this.setHistory()},prev:function(){this.lastStep=this.step,this.step=this.step-1},setHistory:function(){let objSlide=this.slides[this.step];if("loader"===objSlide.fieldType)return null;var objState={step:this.step,lastStep:this.lastStep,id:objSlide.id,alias:objSlide.name},strTitle=objSlide.question.replace(/(<([^>]+)>)/gi,"");history.pushState(objState,strTitle)},move:function(){this.slide=this.slides[this.step],this.$parent&&"function"==typeof this.$parent.active&&this.$parent.active(this.slide,this),this.submit=!1},isValid:function(step){let isValid=!0;step=this.slides[step];return isValid=this.$parent&&"function"==typeof this.$parent.validate?this.$parent.validate(step,this.submit,this):isValid},show:function(slide){return slide===this.slide},first:function(){return!!this.step},last:function(){return this.step!==this.slides.length-1},hasSlide:function(step){return!!this.slides[step]},getProgressbarStyle:function(item){return this.progressbar.line.width=100/this.slides.length*this.step+"%",this.progressbar[item]},setLoadingView:function(field){if(!this.$parent.validate(this.slide,!0))return null;this.loading.show=!!field.eval.view,this.loading.view=field.eval.view},disableLoadingView:function(){this.loading.show=!1,this.loading.view=null},getLoadingViewRequest:function(field,request){if(!request.ok)return field.emit(),this.response.location="Ihre Region",null;for(var name in this.loading.view=request.body.view,request.body)request.body.hasOwnProperty(name)&&(this.response[name]=request.body[name]);setTimeout(function(){field.emit()}.bind(this),4e3)},setCssClasses:function(){let objCssClasses={};return void 0!==this.slide&&null!==this.slide&&this.slide.cssClass&&(objCssClasses[this.slide.cssClass]=!0),objCssClasses}},watch:{step:function(){this.move()},loading:{handler:function(){if(!this.$parent)return null;this.$parent.loadingActive=this.loading.show},deep:!0}},mounted:function(){this.move(),this.created=!0,window.onpopstate=function(event){if(!event.state)return null;this.first()&&event.state.step&&(this.step=event.state.step,this.lastStep=event.state.lastStep)}.bind(this)},props:{slides:{default:[],type:Array,required:!0},preButtonText:{default:"",type:String,required:!1}},template:'<div class="tab-slider" v-bind:class="setCssClasses()"><div class="tab-slider-container"><div class="slide"><div class="slide-content" ref="slide-content"><transition name="slide" v-on:before-enter="beforeEnter" v-on:after-enter="afterEnter"><slot v-bind:show="show" v-bind:loading="loading"/></transition></div></div><div v-if="!loading.show" class="pre-button-text" v-if="preButtonText"><p v-html="preButtonText"></p></div><div v-if="!loading.show" class="progress-bar" :style="getProgressbarStyle(\'container\')"><div :style="getProgressbarStyle(\'line\')" class="line"></div></div><div v-if="!loading.show" class="control"><button v-if="first()" class="prev button" @click="prev"><span>zurück</span></button><button v-if="last() && isValid(step)" class="next button" @click="next(true)"><span>vor</span></button></div></div></div>'})),surveyComponent=Vue.component("survey",{data:function(){return{completeActive:!1,loadingActive:!1,submitted:!1,response:{},slide:{},form:{},externalHeadline:""}},methods:{fetch:function(){if(this.survey)return this.setStorage()&&this.goNext(!0),null;this.$http.get(this.absoluteUrl+"/survey-manager/getSurvey/"+this.id+"?accessToken="+this.accessToken,{},{emulateJSON:!0,"Content-Type":"application/x-www-form-urlencoded"}).then(function(objResponse){if(objResponse.body){this.survey=objResponse.body,this.setText(),this.setStorage()&&this.goNext(!0);try{for(let i=0;i<this.survey.questionsNAnswers.length;i++)"form"===this.survey.questionsNAnswers[i].fieldType&&this.$http.get(this.absoluteUrl+"/form-manager/getForm/"+this.survey.questionsNAnswers[i].form,{}).then(function(objResponse){objResponse.body&&objResponse.ok&&(this.formData=objResponse.body)}.bind(this))}catch(e){}}}.bind(this))},setStorage:function(){let varStorage=localStorage.getItem("survey");if(!varStorage)return null;for(var storage in varStorage=JSON.parse(varStorage))varStorage.hasOwnProperty(storage)&&(this.form[storage]=varStorage[storage]);localStorage.setItem("survey","");let blnGoNext=!1,first=0;for(var name in this.survey.questionsNAnswers)this.survey.questionsNAnswers.hasOwnProperty(name)&&varStorage.hasOwnProperty(this.survey.questionsNAnswers[name].name)&&(first+=1,this.survey.questionsNAnswers[name].saveInLocalStorage||delete this.form[this.survey.questionsNAnswers[name].name],1===first&&this.form[this.survey.questionsNAnswers[name].name]&&(blnGoNext=!0));return localStorage.setItem("survey",""),blnGoNext},getAnswer:function(answer){if(""!==answer&&null!=answer)switch((answer="string"==typeof answer&&/^[\],:{}\s]*$/.test(answer.replace(/\\["\\\/bfnrtu]/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,""))?JSON.parse(answer):answer).type){case"text":return answer.text;case"image":return answer.image[0]?'<figure><img src="'+this.absoluteUrl+"/"+answer.image+'" alt="" height="60" width="75" loading="lazy"></figure>':"";case"textNImage":return answer.image?answer.text+'<figure><img src="'+this.absoluteUrl+"/"+answer.image+'" alt="" height="60" width="75" loading="lazy"></figure>':""}return""},getEval:function(e,a){let eval={};for(var n in e)e.hasOwnProperty(n)&&(eval[n]=e[n]);return eval.showButton=a.button,eval.buttonText=a.buttonText,eval.loadingView=a.loadingView,eval.loadingViewUrl=a.loadingViewUrl,eval.view=a.view,eval.timeout=a.timeout,eval.label=this.getAnswer(a),eval.name=eval.name+"_"+a.name,eval},hasOptions:function(field){return!!field&&(!("checkbox-field"===field.component&&!field.multiple)&&!!field.options)},active:function(slide,component){if(this.response=component.response,this.slide=slide,!this.slide)return null;this.setText(),"loader"===this.slide.fieldType&&setTimeout(function(){this.goNext(!0)}.bind(this),3100),this.$parent&&"function"==typeof this.$parent.onActiveSlide&&this.$parent.onActiveSlide(slide,this)},validate:function(slide,submit,component){if(!slide)return!1;let value=this.form[slide.name];if(!this.hasOptions(slide.field)){var isValid;for(let i=0;i<slide.answers.length;i++)if(slide.answers[i].name&&(value=this.form[slide.name+"_"+slide.answers[i].name],!(isValid=this.validator(this.form[slide.name+"_"+slide.answers[i].name],slide,submit))))return isValid}return this.validator(value,slide,submit)},validator:function(value,slide,submit){if(!this.allow2Skip(slide)||!submit){if(slide.field&&!slide.field.instant&&!submit)return!1;if(slide.mandatory){if(this.allow2Skip(slide))return!0;if(!FormHelperValidator.validateMandatory(value))return!1}if(slide.field&&null!==slide.field.minlength){if(this.allow2Skip(slide))return!0;if(!FormHelperValidator.validateMinLength(value,slide.field.minlength)&&value)return!1}if(slide.field&&null!==slide.field.maxlength&&value){if(this.allow2Skip(slide))return!0;if(!FormHelperValidator.validateMaxLength(value,slide.field.maxlength))return!1}}return!0},allow2Skip:function(slide){return slide.skip&&this.form["skip_"+slide.name]},setInput:function(value,submit){this.slide.skip&&this.form["skip_"+this.slide.name]&&!this.isEmpty(value)&&delete this.form["skip_"+this.slide.name],submit&&(this.goNext(submit),this.$parent&&"function"==typeof this.$parent.onSurveyInput&&this.$parent.onSurveyInput(value,this.slide,this)),localStorage.setItem("survey",JSON.stringify(this.form))},goNext:function(submit){submit=!!submit;for(let i=0;i<this.$children.length;i++)"function"==typeof this.$children[i].next&&this.$children[i].next(submit)},setText:function(){this.slide&&"form"!==this.slide.fieldType&&this.survey.params.externalHeaderHeadline&&this.survey.params.externalHeaderFormHeadline&&(this.externalHeadline=this.survey.params.externalHeaderHeadline),this.slide&&"form"===this.slide.fieldType&&this.survey.params.externalHeaderHeadline&&this.survey.params.externalHeaderFormHeadline&&(this.externalHeadline=this.survey.params.externalHeaderFormHeadline),this.slide&&"form"===this.slide.fieldType&&this.initTippy()},isEmpty:function(val){return null==val||"object"==typeof val&&!val.length},onChange:function(shared){},submitCallback:function(form){return this.form[this.slide.name]=form.model,this.goNext(!0),null},enforcePhoneNumber:function(phone){let newString=phone.match(/[0-9]{0,20}/g);return null===newString?phone:newString=(newString=(newString="0"===(newString=newString.join(""))[0]?newString.substring(1):newString).substring(0,2).includes("49")?"+"+newString:"+49"+newString).substring(0,20)},submitSurvey:function(component){if(this.submitted)return null;if(this.$parent&&this.$parent.setLoadingAlert("",this),this.form.param=this.param,this.form.source=window.location.href,this.form.session=this.session,this.form.origin=this.origin,this.submitted=!0,this.form.contact)for(var name in this.form.contact)if(this.form.contact.hasOwnProperty(name)){let value=this.form.contact[name];"phone"===name&&(value=this.enforcePhoneNumber(value)),sessionStorage.setItem(name,value)}this.form.param||this.form.contact?this.$http.post(this.absoluteUrl+"/survey-manager/save/"+this.id+"?accessToken="+this.accessToken,this.form,{emulateJSON:!0,"Content-Type":"application/x-www-form-urlencoded"}).then(function(objResponse){if(objResponse.ok){this.$parent&&this.$parent.clearAlert(),this.$parent&&"function"==typeof this.$parent.onSubmitSurvey&&this.$parent.onSubmitSurvey(objResponse,component,this);let redirect=this.survey.redirect;if(objResponse.body.survey.skip,redirect=redirect||this.redirect,this.additionalSurvey)return this.reload(this.additionalSurvey),this.additionalSurvey=null;redirect&&(window.location.href=redirect+(window.location.search&&this.survey.redirect?window.location.search:""))}else this.$parent&&this.$parent.setErrorAlert("",this)}.bind(this)):window.location.href=this.survey.redirect},reload:function(id){this.param=this.id,this.completeActive=!0,this.submitted=!1,this.response={},this.slide={},this.form={},this.survey=null,this.id=id,this.mount()},submit:function(){this.goNext(!0)},parseText:function(strText){if(strText)for(var name in this.response)this.response.hasOwnProperty(name)&&(strText=strText.replace(new RegExp("{{ "+name+" }}","gi"),this.response[name]));return strText},skipQuestion:function(){this.slide.skip&&this.form["skip_"+this.slide.name]&&this.hasOptions(this.slide.field)&&(this.form[this.slide.field.name]=[])},setSurveyCssClasses:function(questionsNAnswers,props){let objClasses={};return questionsNAnswers.useDescription&&(objClasses.description=!0),props.loading.show&&(objClasses["loading-window"]=!0),objClasses["_slide-"+questionsNAnswers.id]=!0,objClasses},makeAllPathAbsolute:function(strString){if(!strString)return"";try{this.absoluteUrl&&(strString=strString.replaceAll('src="','src="'+this.absoluteUrl+"/"))}catch(e){}return strString},initTippy:function(){let count=0,clearId=setInterval(function(){if(this.$refs.hasOwnProperty("tippy"))if(clearInterval(clearId),Array.isArray(this.$refs.tippy))for(let i=0;i<this.$refs.tippy.length;i++){let settings={content:this.$refs.tippy[i].dataset.info,placement:"bottom-start",allowHTML:!0};"A"===this.$refs.tippy[i].nodeName&&(settings.trigger="click"),tippy(this.$refs.tippy[i],settings)}else this.$refs.tippy&&tippy(this.$refs.tippy,{content:this.$refs.tippy.dataset.info,placement:"bottom-start",allowHTML:!0});10<++count&&clearInterval(clearId)}.bind(this),250)},descriptionToggler:function(){let count=0,clearId=setInterval(function(){if(this.$refs.hasOwnProperty("surveyQuestionDescription")){if(clearInterval(clearId),!Array.isArray(this.$refs.surveyQuestionDescription))return null;for(let i=0;i<this.$refs.surveyQuestionDescription.length;i++){let objP=this.$refs.surveyQuestionDescription[i].querySelectorAll("p")[1];objP&&objP.addEventListener("click",function(){this.classList.contains("active")?this.classList.remove("active"):this.classList.add("active")})}}10<++count&&clearInterval(clearId)}.bind(this),250)},preventDefault:function(field,props,e){e.preventDefault(),this.form[field]||(this.form[field]=[]),-1===this.form[field].indexOf(props.label.value)&&(this.form[field].push(parseInt(props.label.value)),this.$set(this.form,field,this.form[field]))},mount:function(){for(var name in this.data)this.data.hasOwnProperty(name)&&(this.form[name]=this.data[name]);this.awaitOnChange||this.fetch(),this.initTippy(),this.descriptionToggler()}},mounted:function(){this.mount()},props:{id:{type:String,default:null,required:!0},data:{default:{},type:Object,required:!1},param:{type:String,default:"",required:!1},awaitOnChange:{type:Boolean,default:!1,required:!1},redirect:{type:String,default:null,required:!1},idPrefix:{default:"",type:String,required:!1},survey:{default:null,type:Object,required:!1},formData:{default:null,type:Object,required:!1},absoluteUrl:{default:"",type:String,required:!1},additionalSurvey:{type:String,default:null,required:!1},accessToken:{type:String,default:null,required:!1},session:{type:String,default:null,required:!1},origin:{type:String,default:null,required:!1}},template:'<div v-if="survey" class="survey-component" v-bind:class="{loaded:survey.questionsNAnswers,showing_loader:loadingActive,survey_complete:completeActive}"><div v-if="!loadingActive" class="survey-header" v-if="externalHeadline && !loadingActive"><h2><span>{{ externalHeadline }}<span v-if="survey.params.externalStoerer" class="survey-stoerer"><img :src="survey.params.externalStoerer"/><i :data-info="survey.params.externalStoererText" class="info-icon" ref="tippy"></i></span></span></h2></div><div class="survey-component-container"><tab-slider class="questions" :slides="survey.questionsNAnswers" :preButtonText="survey.params.externalButtonText"><template v-slot:default="props"><div class="question" v-bind:class="setSurveyCssClasses(questionsNAnswers,props)" v-for="questionsNAnswers in survey.questionsNAnswers" v-if="props.show(questionsNAnswers)" v-bind:key="questionsNAnswers"><div class="question-container"><div class="question-headline" v-html="parseText(questionsNAnswers.question)" v-if="questionsNAnswers.question"></div><div v-if="hasOptions(questionsNAnswers.field)" class="question-text"><p v-if="!questionsNAnswers.field.multiple">Bitte wählen Sie <span>eine</span> Antwort aus:</p><p v-else>Sie können <span>mehrere</span> Antworten auswählen:</p></div><div class="answers"><component v-if="hasOptions(questionsNAnswers.field)" :id-prefix="idPrefix" :is="questionsNAnswers.field.component" :no-label="true" :eval="questionsNAnswers.field" :name="questionsNAnswers.field.name" v-model="form[questionsNAnswers.field.name]" class="answer" v-on:input="setInput"><template v-slot:label="slotProps"><label v-if="slotProps.label && slotProps.label.subheadline" class="vcard-option" :for="slotProps.id"><div class="v-card-image" v-if="slotProps.label[\'image\']"><img :src="slotProps.label[\'image\'][0][\'img\'][\'src\']" alt=""></div><div class="v-card-content"><p class="subheadline" v-if="slotProps.label.subheadline" v-html="slotProps.label.subheadline"></p><div v-html="slotProps.label.text"></div><p v-if="slotProps.label.moreText" class="more"><a :data-info="slotProps.label.moreText" ref="tippy" @click="preventDefault(questionsNAnswers.field.name, slotProps, event)">Mehr</a></p></div></label><label v-if="!slotProps.label || !slotProps.label.subheadline" class="answer-text" :for="slotProps.id" v-html="getAnswer(slotProps.label)"></label></template></component><div v-else v-for="answer in questionsNAnswers.answers" class="answer"><component :is="questionsNAnswers.field.component" :id-prefix="idPrefix" :eval="getEval(questionsNAnswers.field,answer)" :name="questionsNAnswers.field.name + \'_\' + answer.name" v-model="form[questionsNAnswers.field.name + \'_\' + answer.name]" v-on:input="setInput"></component></div><component v-if="questionsNAnswers.fieldType === \'form\'" :absolute-url="absoluteUrl" :submit-callback="submitCallback" :form-data="formData" :validate-only="true" :disable-loader="true" :disable-submit="true" is="single-form" :id="questionsNAnswers.id" :identifier="questionsNAnswers.form" source="form"><slot name="form-before-footer"></slot><div class="survey-form-footer"><slot name="form-footer-before-submit"></slot><div class="form-submit"><button type="submit" class="button submit" v-bind:class="{active:submitted}" v-html="questionsNAnswers.buttonText"></button></div><div class="checkout-safe" v-if="survey.params.externalSafeText"><p v-html="survey.params.externalSafeText"></p></div><slot name="form-footer-after-submit"></slot></div><slot name="form-after-footer"></slot></component><div v-if="questionsNAnswers.skip" class="skip-question"><div class="skip-component"><input type="radio" :id="\'id_skip_\' + questionsNAnswers.name" :name="\'skip_\' + questionsNAnswers.name" value="_skipped" v-model="form[\'skip_\' + questionsNAnswers.name]" @change="skipQuestion"><label v-html="questionsNAnswers.skipText" :for="\'id_skip_\' + questionsNAnswers.name"></label></div></div><div v-if="questionsNAnswers.submit" class="submit-container"><slot name="form-footer-before-submit"></slot><button class="button submit" @click="submit"><span v-html="questionsNAnswers.buttonText"></span></button><slot name="form-footer-after-submit"></slot></div></div></div><div v-if="questionsNAnswers.useDescription" class="survey-question-description" v-html="makeAllPathAbsolute(questionsNAnswers.description)" ref="surveyQuestionDescription"></div><div class="loading-view" v-if="props.loading.show" v-html="makeAllPathAbsolute(props.loading.view)"></div></div></template></tab-slider></div><div class="survey-footer" v-if="survey.params.externalFooterText" v-html="survey.params.externalFooterText"></div></div>'});
